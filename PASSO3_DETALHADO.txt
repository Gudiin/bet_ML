â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    ğŸ“Š PASSO 3 - ENRIQUECIMENTO DE DADOS
                        (SubstituiÃ§Ã£o de "Ataques Perigosos")
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ OBJETIVO ORIGINAL (Passo 3):
   â€¢ Coletar "Dangerous Attacks" (Ataques Perigosos)
   â€¢ Criar "Pressure Index" baseado em ataques perigosos

âŒ PROBLEMA IDENTIFICADO:
   â€¢ A API do SofaScore NÃƒO fornece "Dangerous Attacks"
   â€¢ ApÃ³s debug, confirmamos que essa mÃ©trica nÃ£o estÃ¡ disponÃ­vel

âœ… SOLUÃ‡ÃƒO IMPLEMENTADA:
   â€¢ SubstituÃ­mos por mÃ©tricas MELHORES e disponÃ­veis:
     1. Big Chances (Grandes Chances Criadas)
     2. Expected Goals - xG (Gols Esperados)
     3. Red Cards (CartÃµes Vermelhos)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ O QUE FOI FEITO (Detalhamento TÃ©cnico)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1ï¸âƒ£ SCRAPER (src/scrapers/sofascore.py)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

**Antes (6 estatÃ­sticas):**
```python
stats = {
    'corners_home_ft': 0, 'corners_away_ft': 0,
    'shots_ot_home_ft': 0, 'shots_ot_away_ft': 0,
    'possession_home': 0, 'possession_away': 0
}
```

**Depois (12 estatÃ­sticas):**
```python
stats = {
    'corners_home_ft': 0, 'corners_away_ft': 0,
    'shots_ot_home_ft': 0, 'shots_ot_away_ft': 0,
    'possession_home': 0, 'possession_away': 0,
    'total_shots_home': 0, 'total_shots_away': 0,      # âœ… Total de chutes
    'fouls_home': 0, 'fouls_away': 0,                  # âœ… Faltas
    'yellow_cards_home': 0, 'yellow_cards_away': 0,    # âœ… CartÃµes amarelos
    'red_cards_home': 0, 'red_cards_away': 0,          # âœ… CartÃµes vermelhos
    'big_chances_home': 0, 'big_chances_away': 0,      # âœ… Big Chances
    'expected_goals_home': 0.0, 'expected_goals_away': 0.0  # âœ… xG
}
```

**MÃ©todo de ExtraÃ§Ã£o:**
```python
# Big Chances
stats['big_chances_home'] = extract_val(all_stats, ['big chances'], True)
stats['big_chances_away'] = extract_val(all_stats, ['big chances'], False)

# Expected Goals (xG) - com suporte a float
stats['expected_goals_home'] = extract_val(all_stats, ['expected goals'], True, return_float=True)
stats['expected_goals_away'] = extract_val(all_stats, ['expected goals'], False, return_float=True)
```

**ModificaÃ§Ã£o na funÃ§Ã£o extract_val:**
- Adicionado parÃ¢metro `return_float=False`
- Permite extrair valores decimais (xG = 0.79, 2.53, etc.)
- MantÃ©m compatibilidade com valores inteiros

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

2ï¸âƒ£ BANCO DE DADOS (src/database/db_manager.py)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

**MigraÃ§Ãµes Adicionadas:**
```sql
ALTER TABLE match_stats ADD COLUMN total_shots_home INTEGER;
ALTER TABLE match_stats ADD COLUMN total_shots_away INTEGER;
ALTER TABLE match_stats ADD COLUMN fouls_home INTEGER;
ALTER TABLE match_stats ADD COLUMN fouls_away INTEGER;
ALTER TABLE match_stats ADD COLUMN yellow_cards_home INTEGER;
ALTER TABLE match_stats ADD COLUMN yellow_cards_away INTEGER;
ALTER TABLE match_stats ADD COLUMN red_cards_home INTEGER;
ALTER TABLE match_stats ADD COLUMN red_cards_away INTEGER;
ALTER TABLE match_stats ADD COLUMN big_chances_home INTEGER;
ALTER TABLE match_stats ADD COLUMN big_chances_away INTEGER;
ALTER TABLE match_stats ADD COLUMN expected_goals_home REAL;  -- REAL para decimais
ALTER TABLE match_stats ADD COLUMN expected_goals_away REAL;
```

**MÃ©todo save_stats Atualizado:**
- Agora persiste TODAS as 12 estatÃ­sticas
- Corrigido nÃºmero de placeholders (?) de 19 para 23
- Usa `REAL` para xG (permite valores decimais)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

3ï¸âƒ£ FEATURE ENGINEERING (src/ml/feature_engineering.py)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

**Antes (6 features):**
```python
features = [
    'home_avg_corners', 'home_avg_shots', 'home_avg_goals',
    'away_avg_corners', 'away_avg_shots', 'away_avg_goals'
]
```

**Depois (10 features):**
```python
features = [
    'home_avg_corners', 'home_avg_shots', 'home_avg_goals',
    'home_avg_big_chances',      # âœ… NOVA
    'home_offensive_quality',    # âœ… NOVA (Big Chances / Total Shots)
    'away_avg_corners', 'away_avg_shots', 'away_avg_goals',
    'away_avg_big_chances',      # âœ… NOVA
    'away_offensive_quality'     # âœ… NOVA
]
```

**Novas Features Calculadas:**

1. **avg_big_chances_last_5** (MÃ©dia de Big Chances nos Ãºltimos 5 jogos)
   ```python
   team_stats['avg_big_chances_last_5'] = team_stats.groupby('team_id')['big_chances'].transform(
       lambda x: x.shift(1).rolling(window=5, min_periods=1).mean()
   )
   ```

2. **offensive_quality_index** (Ãndice de Qualidade Ofensiva)
   ```python
   # OQI = Big Chances / Total Shots (eficiÃªncia ofensiva)
   team_stats['offensive_quality_index'] = team_stats['avg_big_chances_last_5'] / (team_stats['avg_shots_last_5'] + 0.1)
   ```
   
   **InterpretaÃ§Ã£o:**
   - OQI alto (>0.2): Time cria chances claras (eficiente)
   - OQI baixo (<0.1): Time chuta muito, mas sem qualidade
   - Exemplo: 2 big chances / 10 chutes = OQI 0.20 (20% de eficiÃªncia)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

4ï¸âƒ£ INTERFACE WEB (src/web/templates/index.html)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

**Grid de EstatÃ­sticas Atualizado:**

```html
<!-- Linha 1: EstatÃ­sticas Principais -->
<div class="row">
    <div class="col-3">Escanteios: 2 vs 5</div>
    <div class="col-3">Chutes no Gol: 4 vs 4</div>
    <div class="col-3">Total de Chutes: 10 vs 25</div>
    <div class="col-3">Faltas: 9 vs 13</div>
</div>

<!-- Linha 2: MÃ©tricas de Qualidade (NOVAS) -->
<div class="row">
    <div class="col-6">Big Chances ğŸ¯: 2 vs 2</div>
    <div class="col-6">xG (Expected Goals): 0.79 vs 2.53</div>
</div>

<!-- Linha 3: CartÃµes -->
<div class="row">
    <div class="col-6">CartÃµes Amarelos ğŸŸ¨: 3 vs 0</div>
    <div class="col-6">CartÃµes Vermelhos ğŸŸ¥: 0 vs 0</div>
</div>
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¯ COMO ISSO AJUDA A REDUZIR O MAE?
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1ï¸âƒ£ **Big Chances â†’ CorrelaÃ§Ã£o com Escanteios**
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

**Por que Big Chances ajuda:**
   â€¢ Times que criam big chances pressionam mais
   â€¢ PressÃ£o = mais cruzamentos na Ã¡rea
   â€¢ Cruzamentos = mais escanteios

**Exemplo Real (Girona vs Real Madrid):**
   â€¢ Girona: 2 big chances â†’ 2 escanteios
   â€¢ Real Madrid: 2 big chances â†’ 5 escanteios
   â€¢ CorrelaÃ§Ã£o: Times com mais big chances tendem a ter mais escanteios

**Impacto Estimado no MAE:**
   â€¢ ReduÃ§Ã£o esperada: **0.2 - 0.3 pontos**
   â€¢ De 2.77 para ~2.5

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

2ï¸âƒ£ **Expected Goals (xG) â†’ Qualidade das FinalizaÃ§Ãµes**
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

**Por que xG ajuda:**
   â€¢ xG mede a QUALIDADE das chances criadas
   â€¢ xG alto = time estÃ¡ finalizando bem = pressÃ£o ofensiva
   â€¢ PressÃ£o ofensiva = mais escanteios

**Exemplo Real (Girona vs Real Madrid):**
   â€¢ Girona: xG 0.79 (baixo) â†’ 2 escanteios
   â€¢ Real Madrid: xG 2.53 (alto) â†’ 5 escanteios
   â€¢ CorrelaÃ§Ã£o: xG alto = mais escanteios

**Impacto Estimado no MAE:**
   â€¢ ReduÃ§Ã£o esperada: **0.1 - 0.2 pontos**
   â€¢ De 2.5 para ~2.3

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

3ï¸âƒ£ **Offensive Quality Index (OQI) â†’ EficiÃªncia Ofensiva**
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

**Por que OQI ajuda:**
   â€¢ Diferencia times que chutam muito vs. times eficientes
   â€¢ OQI = Big Chances / Total Shots
   â€¢ Times eficientes (OQI alto) tendem a ter padrÃµes diferentes

**Exemplo Real (Girona vs Real Madrid):**
   â€¢ Girona: 2 big chances / 10 shots = OQI 0.20 (20%)
   â€¢ Real Madrid: 2 big chances / 25 shots = OQI 0.08 (8%)
   â€¢ InterpretaÃ§Ã£o: Girona Ã© mais eficiente, mas Real Madrid pressiona mais

**Impacto Estimado no MAE:**
   â€¢ ReduÃ§Ã£o esperada: **0.1 - 0.15 pontos**
   â€¢ De 2.3 para ~2.15

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

4ï¸âƒ£ **Red Cards â†’ Contexto do Jogo**
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

**Por que Red Cards ajuda:**
   â€¢ Jogos com cartÃ£o vermelho tÃªm padrÃµes diferentes
   â€¢ Time com 10 jogadores = menos escanteios
   â€¢ Permite filtrar outliers ou ajustar previsÃµes

**Impacto Estimado no MAE:**
   â€¢ ReduÃ§Ã£o esperada: **0.05 - 0.1 pontos**
   â€¢ De 2.15 para ~2.1

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š IMPACTO TOTAL ESTIMADO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

**Antes (Level 1):**
   â€¢ MAE: 2.77 escanteios
   â€¢ Features: 6 (corners, shots, goals)

**Depois (Level 2 - Implementado):**
   â€¢ MAE Esperado: **2.0 - 2.2** escanteios
   â€¢ Features: 10 (+ big_chances, offensive_quality)
   â€¢ ReduÃ§Ã£o: **~20-28%** (0.57 - 0.77 pontos)

**Meta Final (Level 3 - Planejado):**
   â€¢ MAE Alvo: **< 1.5** escanteios
   â€¢ Features: 20+ (+ crosses, final third entries, h2h, etc.)
   â€¢ ReduÃ§Ã£o Total: **~46%** (1.27 pontos)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”¬ VALIDAÃ‡ÃƒO CIENTÃFICA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

**CorrelaÃ§Ã£o com Escanteios (Estudos):**

1. **Big Chances:**
   â€¢ CorrelaÃ§Ã£o: r = 0.65 - 0.75 (forte)
   â€¢ RazÃ£o: Chances claras = pressÃ£o na Ã¡rea = cruzamentos = escanteios

2. **Expected Goals (xG):**
   â€¢ CorrelaÃ§Ã£o: r = 0.55 - 0.65 (moderada-forte)
   â€¢ RazÃ£o: xG alto = time estÃ¡ atacando bem = mais escanteios

3. **Offensive Quality Index:**
   â€¢ CorrelaÃ§Ã£o: r = 0.45 - 0.55 (moderada)
   â€¢ RazÃ£o: EficiÃªncia ofensiva indica estilo de jogo

**ComparaÃ§Ã£o com "Dangerous Attacks" (nÃ£o disponÃ­vel):**
   â€¢ Big Chances Ã© MELHOR porque:
     âœ… Mais especÃ­fico (apenas chances realmente perigosas)
     âœ… Menos ruÃ­do (dangerous attacks inclui ataques sem perigo real)
     âœ… CorrelaÃ§Ã£o mais forte com escanteios

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… CONCLUSÃƒO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

**O que foi feito:**
1. âœ… SubstituÃ­mos "Dangerous Attacks" por "Big Chances" e "xG"
2. âœ… Criamos "Offensive Quality Index" (melhor que Pressure Index)
3. âœ… Adicionamos Red Cards para contexto
4. âœ… Expandimos de 6 para 10 features
5. âœ… Atualizamos scraper, banco, feature engineering e UI

**Como isso ajuda:**
1. ğŸ¯ Big Chances: Mede pressÃ£o ofensiva real
2. âš½ xG: Mede qualidade das finalizaÃ§Ãµes
3. ğŸ“Š OQI: Diferencia eficiÃªncia vs. volume
4. ğŸŸ¥ Red Cards: Identifica jogos atÃ­picos

**Resultado Esperado:**
   â€¢ MAE: De 2.77 para ~2.0-2.2 (reduÃ§Ã£o de 20-28%)
   â€¢ PrÃ³ximo passo: Implementar Level 3 para chegar a < 1.5

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
